/** 
* ElementKit - v0.2.1.
* https://github.com/mkay581/element-kit.git
* Copyright 2015 Mark Kennedy. Licensed MIT.
*/
!function(a){"use strict";"function"==typeof define&&define.amd?define(function(){return a()}):window.ElementKit=a()}(function(){"use strict";function a(a){var b,c;return a?(a=a.trim(a),b=document.createElement("div"),b.innerHTML=a,c=b.childNodes[0],b.removeChild(c)):void 0}function b(a){var b,c,d=a;for(c=1;c<arguments.length;c++){b=arguments[c];for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e])}return d}var c,d=0,e={},f=function(a){this.initialize(a)};f.prototype={initialize:function(a){this.el=a,this.classList=this._getClassList(),this._eventListenerMap=this._eventListenerMap||[],Object.defineProperty(this,"dataset",{get:function(){return this.getData()}.bind(this)})},appendOuterHtml:function(b){var c=this.el.parentNode,d=a(b);return c?c.replaceChild(d,this.el):(c=document.createDocumentFragment(),c.appendChild(d)),d.appendChild(this.el),d},getUniqueId:function(){return this.el._kitId},getClosestAncestorElementByClassName:function(a){for(var b,c=this.el.parentNode;c&&"string"==typeof c.className;){if(c.kit._hasClass(a)){b=c;break}c=c.parentNode}return b},addEventListener:function(a,b,c,d){var e=b;d=d||{},"function"!=typeof e&&(e=this._createEventListener(c[b],c)),this.el.addEventListener(a,e,d.useCapture),this._eventListenerMap.push({event:a,listener:e,listenerId:b,context:c})},_createEventListener:function(a,b){return function(){b=b||this,a.apply(b,arguments)}},removeEventListener:function(a,b,c){var d,e,f=this._eventListenerMap||[];if(f.length)for(d=0;d<f.length;d++)if(e=f[d],e&&e.event===a&&e.listenerId===b&&e.context===c){this.el.removeEventListener(a,e.listener),this._eventListenerMap[d]=null;break}},waitForTransition:function(a){var b=this.getTransitionDuration();a&&(b>0?setTimeout(a.bind(this,this.el),b):a(this.el))},getTransitionDuration:function(){var a=this.getCssComputedProperty("transition-delay")||"0ms",b=this.getCssComputedProperty("transition-duration")||"0ms";return a=this._convertCssTimeValueToMilliseconds(a),b=this._convertCssTimeValueToMilliseconds(b),a+b},getCssComputedProperty:function(a){var b=window.getComputedStyle(this.el);return b.getPropertyValue(a)||this.el.style[this._getJsPropName(a)]},_convertCssTimeValueToMilliseconds:function(a){var b=this._convertCssUnitToNumber(a),c=a.replace(b,"");return a="s"===c?1e3*b:b},_convertCssUnitToNumber:function(a){return Number(a.replace(/[a-z]+/,""))},_getClassList:function(){return{add:this._addClass.bind(this),remove:this._removeClass.bind(this),contains:this._hasClass.bind(this),toggle:this._toggleClass.bind(this)}},_getCssClasses:function(){return this.el.className.split(" ")},_toggleClass:function(a){this._hasClass(a)?this._removeClass(a):this._addClass(a)},_addClass:function(){"classList"in document.createElement("_")?this._each(arguments,function(a){this.el.classList.add(a)}.bind(this)):this._each(arguments,function(a){this._hasClass(a)||(this.el.className=this.el.className?this.el.className+" "+a:a)}.bind(this))},_each:function(a,b){var c,d=a.length;for(c=0;d>c;c++)b(a[c])},_removeClass:function(){var a;"classList"in document.createElement("_")?this._each(arguments,function(a){this.el.classList.remove(a)}.bind(this)):this._each(arguments,function(b){this.el.className===b?this.el.className="":(a="[\\s]*"+b,a=new RegExp(a,"i"),this.el.className=this.el.className.replace(a,""))}.bind(this))},_hasClass:function(a){var b=this._getCssClasses();return-1!==b.indexOf(a)},_getJsPropName:function(a){return a=a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},getAttributes:function(){var a=this.el.attributes,b={};if(a.length)for(var c=0;c<a.length;c++)b[a[c].name]=a[c].value;return b},_getDomData:function(){var a,b,c=this.getAttributes(),d={};for(a in c)c.hasOwnProperty(a)&&(b=c[a],0===a.indexOf("data-")&&(a=a.substr(5),d[a]=b));return d},getData:function(){var a;this._data=b({},this._data,this._getDomData());for(a in this._data)if(this._data.hasOwnProperty(a)){var c=this._data[a];Object.defineProperty(this._data,a,{writeable:!0,get:function(){return c}.bind(this),set:function(b){this.setData.bind(this,a,b)}.bind(this)})}return this._data},setData:function(a,b){this.el.setAttribute("data-"+a,b),this._data[a]=b},destroy:function(){}};var g=function(a){f.prototype.initialize.call(this,a)};g.prototype=b({},f.prototype,{load:function(a,b){var c=this.el,d=c.getAttribute(a);return this._origSource=this._origSource||c.src,d||console.warn('ElementKit error: ImageElement has no "'+a+'" attribute to load'),-1!==d.indexOf(",")&&(d=this._getImageSourceSetPath(d)),this._loadImage(d,b),this._loadedSrc=d,this},show:function(){this._loadedSrc&&(this.el.src=this._loadedSrc)},_loadImage:function(a,b,c){var d=new Image;return c=c||document.createElement("img"),d.onload=b||function(){},c.src=a,a},getInitialImageSourcePath:function(){return this._origSource},_getImageSourceSetPath:function(a){var b,c,d,e,f,g=window.innerWidth,h=window.innerHeight;return a.split(",").forEach(function(a){c=this._buildSourceMapWidthHeight(a),d=c.width||0,e=c.height||0,!f&&g>=d&&h>=e&&(b=a.split(" ")[0],f=!0)}.bind(this)),b},_buildSourceMapWidthHeight:function(a,b){var c,d=a.split(" "),e=function(a){return Number(a.substr(0,a.length-1))};return b=b||{},d.shift(),d.forEach(function(a){c=a.charAt(a.length-1),"w"===c?b.width=e(a):"h"===c&&(b.height=e(a))}),b}});var h=function(a){this.initialize(a)};return h.prototype={initialize:function(a){var d=this;this.options=b({autoLoad:!0},a),this.options.autoLoad&&!c&&(c=Object.defineProperty(window.Element.prototype,"kit",{get:function(){return d.setup(this)}}))},setup:function(a){var b;return e[a._kitId]||(b=a instanceof window.HTMLImageElement?g:f,d++,a._kitId=d,e[a._kitId]=new b(a)),e[a._kitId]},destroy:function(){}},h});