<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: checkbox.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: checkbox.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>define([
    './utils',
    './base-form-element'
], function (
    Utils,
    BaseFormElement
    ) {
    "use strict";

    /**
     * A callback function that fires when the checkbox is checked
     * @callback Checkbox~onCheckedCallback
     * @param {string} value - The input element's value
     * @param {HTMLInputElement} input - The input element
     * @param {HTMLElement} container - The input element's container
     */

    /**
     * A callback function that fires when the checkbox is un-checked
     * @callback Checkbox~onUncheckedCallback
     * @param {string} value - The input element's value
     * @param {HTMLInputElement} input - The input element
     * @param {HTMLElement} container - The input element's container
     */

    /**
     * Adds JS functionality to an input checkbox.
     * @class Checkbox
     * @extends BaseFormElement
     * @param {object} options - Options to pass
     * @param {HTMLInputElement} options.el - The input element checkbox
     * @param {Checkbox~onCheckedCallback} [options.onChecked] - A callback function that fires when the checkbox is checked
     * @param {Checkbox~onUncheckedCallback} [options.onUnchecked] - A callback function that fires when the checkbox is un-checked
     * @param {string} [options.cssPrefix] - A custom css class that will be used as namespace for all css classes applied
     */
    var Checkbox = function (options) {
        this.initialize(options);
    };

    Checkbox.prototype = Utils.extend({}, BaseFormElement.prototype, {

        /**
         * Initialization.
         * @param {object} options - Options passed into instantiation.
         */
        initialize: function (options) {

            this.options = Utils.extend({
                el: null,
                onChecked: null,
                onUnchecked: null,
                cssPrefix: 'ui-checkbox'
            }, options);

            this.checkedClass = this.options.cssPrefix + '-checked';
            this.disabledClass = this.options.cssPrefix + '-disabled';
            this.el = this.options.el;

            if (!this.el.tagName.toLowerCase() !== 'input') {
                console.warn('checkbox error: no input element was passed');
            }

            BaseFormElement.prototype.initialize.call(this, options);

            this.setup();

        },

        /**
         * Sets up html.
         */
        setup: function () {
            var input = this.getFormElement();

            Utils.addClass(input, this.options.cssPrefix + '-input');

            this._container = this._buildUIElement(this.el);

            // if input element is already checked initially, check it!
            this.isInitChecked = input.checked;
            if (this.isInitChecked) {
                Utils.addClass(this._container, this.checkedClass);
            }

            this.isInitDisabled = input.disabled;
            if (this.isInitDisabled) {
                Utils.addClass(this._container, this.disabledClass);
            }

            // setup events
            Utils.addEventListener(this.getUIElement(), 'click', this._onClick.bind(this));
        },

        /**
         * When the checkbox element is clicked.
         * @private
         */
        _onClick: function () {
            var input = this.getFormElement();
            if (!input.disabled) {
                if (!Utils.hasClass(this.getUIElement(), this.checkedClass)) {
                    this.check();
                } else {
                    this.uncheck();
                }
            }
        },

        /**
         * Builds the checkbox UI-friendly version.
         * @param {HTMLInputElement} inputEl - The input element
         * @returns {HTMLElement} Returns the input element wrapped in a new container
         * @private
         */
        _buildUIElement: function (inputEl) {
            return Utils.wrapHtmlElement(inputEl, '&lt;div class="' + this.options.cssPrefix + '">&lt;/div>');
        },


        /**
         * Checks the checkbox.
         */
        check: function () {
            var input = this.getFormElement(),
                container = this.getUIElement();
            if (!input.checked) {
                input.checked = true;
            }
            Utils.addClass(container, this.checkedClass);
            if (this.options.onChecked) {
                this.options.onChecked(input.value, input, container);
            }
        },

        /**
         * Un-checks the checkbox.
         */
        uncheck: function () {
            var input = this.getFormElement(),
                container = this.getUIElement();
            if (input.checked) {
                input.checked = false;
            }
            Utils.removeClass(container, this.checkedClass);
            if (this.options.onUnchecked) {
                this.options.onUnchecked(input.value, input, container);
            }
        },

        /**
         * Enables the checkbox.
         */
        enable: function () {
            this.getFormElement().disabled = false;
            Utils.removeClass(this.getUIElement(), this.disabledClass);
        },

        /**
         * Disables the checkbox.
         */
        disable: function () {
            this.getFormElement().disabled = true;
            Utils.addClass(this.getUIElement(), this.disabledClass);
        },

        /**
         * Gets the checkbox input element.
         * @returns {HTMLInputElement} Returns the checkbox input element
         */
        getFormElement: function () {
            return this.el;
        },

        /**
         * Gets the checkbox div element.
         * @returns {HTMLElement} Returns the checkbox div element.
         */
        getUIElement: function () {
            return this._container;
        },

        /**
         * Gets the unique identifier for checkboxes.
         * @returns {string}
         */
        getElementKey: function () {
            return 'checkbox';
        },

        /**
         * Destruction of this class.
         */
        destroy: function () {
            var container = this.getUIElement(),
                input = this.getFormElement();

            // remove event listener
            Utils.removeEventListener(this.getUIElement(), 'click', this._onClick.bind(this));

            // remove stray html
            container.parentNode.replaceChild(input, container);

            if (this.isInitChecked) {
                input.checked = true;
            }
            if (this.isInitDisabled) {
                input.disabled = true;
            }
            BaseFormElement.prototype.destroy.call(this);
        }

    });

    return Checkbox;
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Checkbox.html">Checkbox</a></li></ul><h3>Global</h3><ul><li><a href="global.html#check">check</a></li><li><a href="global.html#destroy">destroy</a></li><li><a href="global.html#disable">disable</a></li><li><a href="global.html#enable">enable</a></li><li><a href="global.html#getElementKey">getElementKey</a></li><li><a href="global.html#getFormElement">getFormElement</a></li><li><a href="global.html#getUIElement">getUIElement</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#uncheck">uncheck</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Tue Oct 21 2014 21:40:15 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
