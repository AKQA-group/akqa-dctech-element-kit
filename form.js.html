<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: form.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: form.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>define([
    './utils'
], function (
    Utils
) {
    "use strict";

    /**
     * The function that fires when the input value changes
     * @callback Form~onValueChange
     * @param {Event} event - The event that fired the change
     */

    /**
     * Utility class for form elements.
     * @class Form
     * @param {HTMLInputElement} options.el - The input field element
     * @param {Form~onValueChange} [options.onValueChange] - A callback function that fires when the input value changes
     */
    var Form = function (options) {
        this.initialize(options);
    };

    Form.prototype = Utils.extend({}, /** @lends Form */{
        /**
         * Sets up the form.
         * @param {object} options - The options
         * @param {HTMLFormElement} [options.el] - The form element
         * @param {Function} [options.onValueChange] - Function callback that is fired when any value in the form changes
         */
        initialize: function (options) {
            this.options = Utils.extend({
                el: null,
                onValueChange: null
            }, options);

            this._setupEvents();
        },

        /**
         * Sets up change events.
         * @private
         */
        _setupEvents: function () {
            var i;
            this.eventEls = this.options.el.elements;
            for (i = 0; i &lt; this.eventEls.length; i++) {
                Utils.addEventListener(this.eventEls[i], 'change', '_onValueChange', this);
            }
        },

        /**
         * When any form element's value changes.
         * @param {Event} e
         * @private
         */
        _onValueChange: function (e) {
            if (this.options.onValueChange) {
                this.options.onValueChange(e);
            }
        },

        /**
         * Disables all form elements.
         */
        disable: function () {
            this.setPropertyAll('disabled', true);
        },

        /**
         * Enables all form elements.
         */
        enable: function () {
            this.setPropertyAll('disabled', false);
        },

        /**
         * Sets a property on all form elements.
         * @param {string} prop - The property to change
         * @param {*} value - The value to set
         */
        setPropertyAll: function (prop, value) {
            var i,
                els = this.options.el.elements;
            for (i = 0; i &lt; els.length; i++) {
                els[i][prop] = value;
            }
        },

        /**
         * Gets an object that maps all fields to their current name/value pairs.
         * @returns {Array} Returns an array of objects
         */
        getCurrentValues: function () {
            var map = [],
                fields = this.options.el.querySelectorAll('[name]'),
                fieldCount = fields.length,
                i,
                field,
                obj;
            for (i = 0; i &lt; fieldCount; i++) {
                field = fields[i];
                // only add fields with a name attribute
                if (field.name) {
                    obj = {
                        name: field.name,
                        // fallback to value attribute when .value can't be trusted (i.e. input[type=date])
                        value: field.value
                        //value: field.value || field.getAttribute('value')
                    };
                    map.push(obj);
                }
            }
            return map;
        },

        /**
         * Kills form functionality.
         */
        destroy: function () {
            var i;
            for (i = 0; i &lt; this.eventEls.length; i++) {
                Utils.removeEventListener(this.eventEls[i], 'change', '_onValueChange', this);
            }
        }
    });

    return Form;
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="BaseFormElement.html">BaseFormElement</a></li><li><a href="ButtonToggle.html">ButtonToggle</a></li><li><a href="Checkbox.html">Checkbox</a></li><li><a href="Form.html">Form</a></li><li><a href="InputField.html">InputField</a></li></ul><h3>Namespaces</h3><ul><li><a href="Utils.html">Utils</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Sun Nov 02 2014 15:55:22 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
